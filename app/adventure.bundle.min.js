function scrollByX(n,t){var i=parseInt(n.css("top"),10);n.css("top",i+t+"px")}(function(){var n=window.Engine={VERSION:1,GAME_OVER:!1,MAX_STORE:99999999999999,SAVE_DISPLAY:3e4,options:{state:null,debug:!1,log:!1},topics:{},Perks:{boxer:{name:"boxer",desc:"punches do more damage",notify:"learned to throw punches with purpose"},"martial artist":{name:"martial artist",desc:"do max damage in hand to hand combat",notify:"learned to fight effectively without weapons"},"slow metabolism":{name:"slow metabolism",desc:"go twice as far without eating",notify:"learned how to ignore the hunger"},evasive:{name:"evasive",desc:"dodge attacks more effectively",notify:"learned to be where they're not"},hawkeye:{name:"hawkeye",desc:"you notice even the littlest of things",notify:"learned to look more closely"},stealthy:{name:"stealthy",desc:"better avoid conflict",notify:"learned how to not be seen"},gastronome:{name:"gatrononome",desc:"restores more health when eating",notify:"learned to make the most of food"}},init:function(t){this.options=$.extend(this.options,t);this._debug=this.options.debug;this._log=this.options.log;!n.browserValid();n.isMobile();n.disableSelection();this.options.state!=null?window.State=this.options.state:n.loadGame();$("#gameInputTxt").off("keydown").keydown(n.keyDown);$.Dispatch("stateUpdate").subscribe(n.handleStateUpdates)},browserValid:function(){return location.search.indexOf("ignorebrowser=true")>=0||typeof Storage!="undefined"&&!oldIE},isMobile:function(){return location.search.indexOf("ignorebrowser=true")<0&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)},saveGame:function(){typeof Storage!="undefined"&&localStorage&&(n._saveTimer!=null&&clearTimeout(n._saveTimer),(typeof n._lastNotify=="undefined"||Date.now()-n._lastNotify>n.SAVE_DISPLAY)&&($("#saveNotify").css("opacity",1).animate({opacity:0},1e3,"linear"),n._lastNotify=Date.now()),localStorage.gameState=JSON.stringify(State))},loadGame:function(){try{var t=JSON.parse(localStorage.gameState);t&&(State=t,$SM.updateOldState(),n.log("loaded save!"))}catch(i){State={};$SM.set("version",n.VERSION);n.event("progress","new game")}},event:function(n,t){typeof ga=="function"&&ga("send","event",n,t)},confirmDelete:function(){Events.startEvent({title:_("Restart?"),scenes:{start:{text:[_("restart the game?")],buttons:{yes:{text:_("yes"),nextScene:"end",onChoose:n.deleteSave},no:{text:_("no"),nextScene:"end"}}}}})},deleteSave:function(n){if(typeof Storage!="undefined"&&localStorage){var t=Prestige.get();window.State={};localStorage.clear();Prestige.set(t)}n||location.reload()},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},activeModule:null,log:function(n){this._log&&console.log(n)},keyDown:function(t){return t=t||window.event,n.keyPressed||n.keyLock||(n.pressed=!0,n.activeModule.keyDown&&n.activeModule.keyDown(t)),jQuery.inArray(t.keycode,[37,38,39,40])<0},disableSelection:function(){document.onselectstart=eventNullifier;document.onmousedown=eventNullifier},enableSelection:function(){document.onselectstart=eventPassthrough;document.onmousedown=eventPassthrough},autoSelect:function(n){$(n).focus().select()},handleStateUpdates:function(){},setInterval:function(t,i,r){return n.options.doubleTime&&!r&&(n.log("Double time, cutting interval in half"),i/=2),setInterval(t,i)},setTimeout:function(t,i,r){return n.options.doubleTime&&!r&&(n.log("Double time, cutting timeout in half"),i/=2),setTimeout(t,i)}}})();$.Dispatch=function(n){var t,i=n&&Engine.topics[n];return i||(t=jQuery.Callbacks(),i={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},n&&(Engine.topics[n]=i)),i};$(function(){Engine.init()});